{% extends "base.html" %}

{% block header %}
  {{ super() }}

  <script>
    document.addEventListener("DOMContentLoaded", function() {
        let user = localStorage.getItem("arrowheadUser");
        if (!user) return;

        const headerInner = document.querySelector(".md-header__inner");
        if (!headerInner) return;

        // prepreči podvajanje
        if (document.getElementById("userChip")) return;

        const chip = document.createElement("div");
        chip.id = "userChip";

        // tekst + gumb Odjava
        const spanUser = document.createElement("span");
        spanUser.textContent = user;
        spanUser.style.marginRight = "8px";

        const btnLogout = document.createElement("button");
        btnLogout.textContent = "×";
        btnLogout.style.cursor = "pointer";
        btnLogout.style.background = "none";
        btnLogout.style.border = "none";
        btnLogout.style.color = "white";
        btnLogout.style.fontWeight = "bold";
        btnLogout.onclick = () => {
            localStorage.removeItem("arrowheadUser");
            location.reload();
        };

        chip.appendChild(spanUser);
        chip.appendChild(btnLogout);

        // styling chip (Material-like)
        chip.style.background = "rgba(255,255,255,0.15)";
        chip.style.padding = "4px 12px";
        chip.style.borderRadius = "20px";
        chip.style.fontSize = "0.8rem";
        chip.style.color = "white";
        chip.style.fontWeight = "500";
        chip.style.display = "flex";
        chip.style.alignItems = "center";
        chip.style.height = "32px";
        chip.style.marginLeft = "auto"; // POTISNE ČISTO DESNO
        chip.style.whiteSpace = "nowrap";

        headerInner.appendChild(chip);
    });
  </script>
{% endblock %}

