<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     width="1000" height="600"  viewBox="200 0 1000 600"
	 style="background:#f8f8f8; cursor:pointer;"
	 onclick="startAnimation(evt)">
<metadata>Author: Simon Pavlin, 2026</metadata>
  <title>Archer</title>
  <defs>
	<g id="field" stroke-width="0.5">
		<circle r="50" stroke="white" fill="black"/>
		<circle r="40" stroke="white" />
		<circle r="30" stroke="white" />
		<circle r="20" stroke="white" />
		<circle r="10" stroke="black" fill="yellow" />
		<circle r="5"  stroke="black" fill="none" />
		<line x1="-2" y1="0" x2="2" y2="0" stroke="black" />
		<line x1="0" y1="-2" x2="0" y2="2" stroke="black" />
	</g>
	<marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto">
		<path d="M0,0 L0,6 L9,3 z" fill="red"/>
	</marker>
</defs>

  <g id="archer" stroke="#303fa1" stroke-width="20px" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
	 <!-- TLA -->
    <line x1="250" y1="460" x2="1100" y2="460" stroke="silver" stroke-width="10"/>
	
	<!-- tarča -->
	<use xlink:href="#field" transform="translate(700,250)">
	<animateTransform
	  id="transformAnim"
      attributeName="transform"
      attributeType="XML"
	  begin="indefinite"
      type="translate"
      from="700 250"
      to="1000 250"
      dur="3s"
	  fill="freeze"/>
	</use>
	<!-- linije oko - tarča -->
	<line x1="420" y1="210" x2="700" y2="250" stroke="silver" stroke-width="1">
		<animate
		  begin="transformAnim.begin"	
		  attributeName="x2" 
		  from="700" 
		  to="1000" 
		  dur="3s"
		  fill="freeze"/>
		  <animate
		  begin="transformAnim.begin"	
		  attributeName="x1" 
		  from="420" 
		  to="400" 
		  dur="3s"
		  fill="freeze"/>
	</line>
	
	      <!-- T -->
	  <g id="t_mark" opacity="0">
        <!--line x1="400" y1="250" x2="400" y2="325" stroke="red" stroke-width="5px" />
        <line x1="350" y1="250" x2="450" y2="250" stroke="red" stroke-width="5px" /-->
		<line x1="585" y1="240" x2="592" y2="270" stroke="red" stroke-width="2px" fill="none" marker-end="url(#arrow)"/>
		<line x1="700" y1="250" x2="900" y2="250" stroke="red" stroke-width="2px" fill="none" marker-end="url(#arrow)"/>
	  </g>
	
    <g id="body_group" transform="rotate(0, 400,325)">
      <!-- ANIMACIJA ROTACIJE -->
      <animateTransform 
        id="rotateAnim"
        attributeName="transform"
        type="rotate"
        dur="3s"
        begin="transformAnim.begin"
        values="0 400 325; -12 400 325"
        fill="freeze"
      />

      <!-- telo -->
      <circle cx="400" cy="210" r="15" stroke-width="15px" />
      <line x1="400" y1="250" x2="400" y2="325" />
      <line x1="340" y1="250" x2="490" y2="250" />

      <!-- lok -->
      <path d="M460,140 Q570,250 460,360 " stroke-width="15px"/>
	  
	  <!-- merilna -->
	  <line x1="520" y1="230" x2="580" y2="230" stroke-width="10px"/>
	  <line x1="580" y1="210" x2="580" y2="260" stroke-width="10px"/>
	  <circle cx="590" cy="234" r="5" stroke-width="5px">
	  <animate
		  begin="transformAnim.begin"	
		  attributeName="cy" 
		  from="234" 
		  to="255" 
		  dur="3s"
		  fill="freeze"/>
	  </circle>
    </g>

    <!-- noge -->
    <line x1="400" y1="350" x2="440" y2="455" />
    <line x1="400" y1="350" x2="360" y2="455" />

  </g>

<script type="application/ecmascript"><![CDATA[
    function startAnimation(evt) {
      const svg = evt.currentTarget;
      const anim = svg.getElementById("transformAnim");
	  const tMark = document.getElementById("t_mark");
	  tMark.style.opacity = 0;
      anim.beginElement();
	  anim.addEventListener("endEvent", () => {
		const tMark = document.getElementById("t_mark");
	    tMark.style.opacity = 1;
	  });
    }
  ]]></script>

</svg>
