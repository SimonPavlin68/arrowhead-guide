<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN" "http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
 width="500" height="300"  viewBox="150 200 500 300"
 style="background:#f8f8f8; cursor:pointer;" onclick="startAnimation(evt)">
 <metadata>Author: Simon Pavlin, 2025</metadata>
 	<title>Angle</title>
<defs>
	<g id="field" stroke-width="0.5">
		<circle r="50" stroke="white" fill="black"/>
		<circle r="40" stroke="white" />
		<circle r="30" stroke="white" />
		<circle r="20" stroke="white" />
		<circle r="10" stroke="black" fill="yellow" />
		<circle r="5"  stroke="black" fill="none" />
		<line x1="-2" y1="0" x2="2" y2="0" stroke="black" />
		<line x1="0" y1="-2" x2="0" y2="2" stroke="black" />
	</g>
	<marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto">
		<path d="M0,0 L0,6 L9,3 z" fill="red"/>
	</marker>
</defs>
	<!-- TLA -->
	<line x1="160" y1="460" x2="550" y2="460" stroke="silver" stroke-width="10" stroke-linecap="round"/>
	<!-- linija do tarče -->
	<g id="tekst" opacity="1">
		<path id="trajektorija" d="M252,336 Q420,270 520,320" stroke="red" stroke-width="1px" fill="none" stroke-dasharray="5 12"/>
	</g>

	<g id="archer" stroke="#303fa1" stroke-width="20px" fill="none"
     stroke-linecap="round" stroke-linejoin="round"
	 transform="translate(20, 225) scale(0.5)">
	    <use xlink:href="#field"  transform="translate(1000,150)" />
		<!-- trup zgoraj -->
		<line x1="400" y1="250" x2="400" y2="325" />
		<line x1="400" y1="250" x2="400" y2="325" stroke="red" stroke-width="5px" />
		<g id="body_group" transform="rotate(-20, 400,250)">
		  <!-- telo -->
		  <circle cx="400" cy="210" r="15" stroke-width="15px" />
		  <!--line x1="400" y1="250" x2="400" y2="325" /-->
		  <line x1="340" y1="250" x2="490" y2="250" />
		  <g id="t_sign">
			<line x1="350" y1="250" x2="450" y2="250" stroke="red" stroke-width="5px" />
		  </g>
		  <!-- lok -->
		  <path d="M460,140 Q570,250 460,360 " stroke-width="15px"/>
		</g>
		<!-- noge -->
		<line x1="400" y1="350" x2="440" y2="455" />
		<line x1="400" y1="350" x2="360" y2="455" />
	</g>
	<!-- Rdeč križec (skrit na začetku) -->
	<text id="checkmark" x="300" y="370" font-size="50" fill="red" style="display:none;">✖</text>

	<!-- Circle to move along path -->
	<circle id="movingCircle" cx="252" cy="336" r="7" fill="red" style="display:none;">
		<!-- Animation for moving along the path -->
		<animateMotion dur="2s" repeatCount="1" keyTimes="0;1" begin="indefinite" fill="freeze">
			<mpath href="#trajektorija" />
		</animateMotion>
	</circle>

	<script type="application/ecmascript"><![CDATA[
    function startAnimation(evt) {
      const svg = evt.currentTarget;
      const movingCircle = svg.getElementById("movingCircle");
      const anim = movingCircle.getElementsByTagName("animateMotion")[0];

      // Zdaj zagotovimo, da je krog vedno na začetku pred animacijo
      movingCircle.setAttribute("cx", "0"); // Nastavimo začetni x koordinat
      movingCircle.setAttribute("cy", "0"); // Nastavimo začetni y koordinat
      movingCircle.style.display= 'block';
	  // Sproži animacijo premika kroga po poti
	  anim.addEventListener("endEvent", function() {
        console.log("Animacija je zaključena!");
        showMark(svg);
      });

      // Sproži animacijo premika kroga po poti
      anim.beginElement();
    }
	
	function showMark(svg) {
		const checkmark = svg.getElementById("checkmark");
		checkmark.style.display = 'block'; // prikaži kljukico
	}
	
	function hideMark(svg) {
		const checkmark = svg.getElementById("checkmark");
		checkmark.style.display = 'none'; // prikaži kljukico
	}
  ]]></script>
</svg>
