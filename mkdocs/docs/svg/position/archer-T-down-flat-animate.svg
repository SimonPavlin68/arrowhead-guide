<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     width="500" height="400"  viewBox="150 130 500 350"
	 style="background:#f8f8f8; cursor:pointer;" onclick="startAnimation(evt)">
<metadata>Author: Simon Pavlin, 2025</metadata>
 <title>Archer</title>

  <g id="archer" stroke="#303fa1" stroke-width="20px" fill="none"
     stroke-linecap="round" stroke-linejoin="round">
	 <!-- TLA -->
    <line x1="250" y1="460" x2="550" y2="460" stroke="silver" stroke-width="10"/>
    <g id="body_group" transform="rotate(0, 400,325)">
      <!-- ANIMACIJA ROTACIJE -->
      <animateTransform 
        id="rotateAnim"
        attributeName="transform"
        type="rotate"
        dur="3s"
        begin="indefinite"
        values="0 400 325; 50 400 325;"
        fill="freeze"
      />

      <!-- Rdeči klicaj (blink) -->
      <animate 
        xlink:href="#warning"
        attributeName="opacity"
        begin="rotateAnim.begin + 1.2s"
        dur="2s"
        values="0;1;0;1"
        repeatCount="3"
/>

      <!-- telo -->
      <circle cx="400" cy="210" r="15" stroke-width="15px" />
      <line x1="400" y1="250" x2="400" y2="325" />
      <line x1="340" y1="250" x2="490" y2="250" />

      <!-- T -->
	  <g id="t_mark" opacity="0">
        <line x1="400" y1="250" x2="400" y2="325" stroke="red" stroke-width="5px" />
        <line x1="350" y1="250" x2="450" y2="250" stroke="red" stroke-width="5px" />
	  </g>

      <!-- lok -->
      <path d="M460,140 Q570,250 460,360 " stroke-width="15px"/>
    </g>

    <!-- noge -->
    <line x1="400" y1="350" x2="440" y2="460" />
    <line x1="400" y1="350" x2="360" y2="460" />

  </g>
  <!-- znaki -->
  <text id="checkmark_right" x="360" y="300" font-size="50" fill="green" opacity="0">✔</text>
  <text id="warning" x="440" y="420" font-size="50" fill="red" opacity="0">!</text>
  

<script type="application/ecmascript"><![CDATA[
    function startAnimation(evt) {
      const svg = evt.currentTarget;
      const anim = svg.getElementById("rotateAnim");
	  const xMark = document.getElementById("checkmark_right");
	  xMark.style.opacity = 0; // skrij ✖
	  const tMark = document.getElementById("t_mark");
	  tMark.style.opacity = 0;
      anim.beginElement();
	  anim.addEventListener("endEvent", () => {
		const xMark = document.getElementById("checkmark_right");
		xMark.style.opacity = 1; // pokaži ✖
		const tMark = document.getElementById("t_mark");
	    tMark.style.opacity = 1;
	  });
    }
  ]]></script>

</svg>
